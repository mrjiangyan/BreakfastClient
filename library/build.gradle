apply plugin: 'com.android.library'
apply plugin: 'me.tatarka.retrolambda'
apply plugin: 'com.noveogroup.android.check'


def cfg = rootProject.ext.configuration
// 配置
def libs = rootProject.ext.libraries
// 库

android {
  compileSdkVersion cfg.compileSdkVersion
  buildToolsVersion cfg.buildToolsVersion
  publishNonDefault true
  defaultConfig {
    minSdkVersion cfg.minSdkVersion
    targetSdkVersion cfg.targetSdkVersion
    versionCode cfg.versionCode
    versionName cfg.versionName
  }

  compileOptions {
    sourceCompatibility JavaVersion.VERSION_1_8
    targetCompatibility JavaVersion.VERSION_1_8
  }

  buildTypes {
    release {
      minifyEnabled false
      proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
    }
    debug {
      //            testCoverageEnabled = true
    }
  }
  sourceSets {
    instrumentTest.setRoot('src/test')
  }
    buildToolsVersion '25.0.0'
}

check {
  abortOnError true
}

dependencies {
  compile fileTree(include: ['*.jar'], dir: 'libs')
  compile "com.google.guava:guava:$libs.guavaVersion"
  compile "com.apkfuns.logutils:library:${libs.logUtils}"
  compile "com.android.support:design:${libs.supportVersion}"
  compile "com.android.support:gridlayout-v7:${libs.supportVersion}"
  compile "com.jakewharton:butterknife:${libs.butterknife}"
  compile "com.android.support:cardview-v7:${libs.supportVersion}"
  compile "com.android.support:support-v4:${libs.supportVersion}"
  compile "io.reactivex:rxjava:${libs.rxJava}"
  compile "com.artemzin.rxjava:proguard-rules:${libs.rxJavaProguard}"
  compile "io.reactivex:rxandroid:${libs.rxAndroid}"
  compile "com.google.code.gson:gson:${libs.gson}"
  compile "com.android.support:support-annotations:${libs.supportVersion}"

  //Retrofit
  compile "com.squareup.retrofit2:retrofit:${libs.retrofit2}"
  compile "com.squareup.retrofit2:converter-gson:${libs.retrofit2}"
  compile "com.squareup.retrofit2:adapter-rxjava:${libs.retrofit2}"
  //OkHttp
  compile "com.squareup.okhttp3:okhttp:${libs.okhttp3}"
  compile "com.squareup.okhttp3:logging-interceptor:${libs.okhttp3}"

  // test
  testCompile 'junit:junit:4.12'
  testCompile "org.robolectric:shadows-httpclient:${libs.robolectricVersion}"
  testCompile('com.squareup.assertj:assertj-android:1.1.0') {
    exclude module: "support-annotations"
  }
  testCompile("org.robolectric:robolectric:${libs.robolectricVersion}") {
    exclude module: 'commons-logging'
  }
  testCompile 'org.robolectric:android-all:5.0.0_r2-robolectric-1'
  testCompile 'org.mockito:mockito-core:1.+'
  instrumentTestCompile 'junit:junit:4.12'
  instrumentTestCompile 'org.robolectric:robolectric:3.1.1-SNAPSHOT'
  instrumentTestCompile 'com.squareup:fest-android:1.0.+'

}

